const n=JSON.parse(`{"key":"v-ee7f7b96","path":"/techniques/Tools/others/ts.html","title":"Download TS","lang":"en-US","frontmatter":{"title":"Download TS","index":true,"icon":"/assets/icon/common/manual.svg","author":"Haiyue","date":"2023-12-15T00:00:00.000Z","category":["work"],"description":"download ts import requests as req import pandas as pd import cv2 def get_video_resolution(ts_file_path): try: # Open the TS file cap = cv2.VideoCapture(ts_file_path) # Get the resolution width = int(cap.get(cv2.CAP_PROP_FRAME_WIDTH)) height = int(cap.get(cv2.CAP_PROP_FRAME_HEIGHT)) return width, height except Exception as e: print(f\\"Error: {e}\\") return None uri = 'https://embed-cloudfront.wistia.com/deliveries/731e2344da7f9e5dea577a06ba99a98fc3308213.m3u8/' df = pd.read_excel(r'C:\\\\Users\\\\Administrator\\\\Mozaik\\\\videos.xlsx', 0) df = df[df['id'].isnull() == False] base_path = r'C:\\\\Users\\\\Administrator\\\\Mozaik' base_url = 'https://embed-cloudfront.wistia.com/deliveries/' for i in df.index: item = df.loc[i] idx = 1 temp = None while True: fname = f\\"seg-{idx}-v1-a1.ts\\" idx += 1 folder = f'{item[\\"Title\\"]}-{item[\\"subtitle\\"]}' print(folder) store_path = os.path.join(base_path, folder) if not os.path.exists(store_path): os.makedirs(store_path) fullname = os.path.join(store_path, fname) if os.path.exists(fullname): continue url = f\\"{base_url}{item['id']}/{fname}\\" print(url) resp = req.get(url) if 200 == resp.status_code: temp = resp.content with open(fullname, 'wb') as fw: fw.write(resp.content) size = get_video_resolution(fullname) if size[0] &lt; 1000: os.remove(fullname) break else: break","head":[["meta",{"property":"og:url","content":"https://seamice.github.io/blog/techniques/Tools/others/ts.html"}],["meta",{"property":"og:site_name","content":"Haiyue's Blog"}],["meta",{"property":"og:title","content":"Download TS"}],["meta",{"property":"og:description","content":"download ts import requests as req import pandas as pd import cv2 def get_video_resolution(ts_file_path): try: # Open the TS file cap = cv2.VideoCapture(ts_file_path) # Get the resolution width = int(cap.get(cv2.CAP_PROP_FRAME_WIDTH)) height = int(cap.get(cv2.CAP_PROP_FRAME_HEIGHT)) return width, height except Exception as e: print(f\\"Error: {e}\\") return None uri = 'https://embed-cloudfront.wistia.com/deliveries/731e2344da7f9e5dea577a06ba99a98fc3308213.m3u8/' df = pd.read_excel(r'C:\\\\Users\\\\Administrator\\\\Mozaik\\\\videos.xlsx', 0) df = df[df['id'].isnull() == False] base_path = r'C:\\\\Users\\\\Administrator\\\\Mozaik' base_url = 'https://embed-cloudfront.wistia.com/deliveries/' for i in df.index: item = df.loc[i] idx = 1 temp = None while True: fname = f\\"seg-{idx}-v1-a1.ts\\" idx += 1 folder = f'{item[\\"Title\\"]}-{item[\\"subtitle\\"]}' print(folder) store_path = os.path.join(base_path, folder) if not os.path.exists(store_path): os.makedirs(store_path) fullname = os.path.join(store_path, fname) if os.path.exists(fullname): continue url = f\\"{base_url}{item['id']}/{fname}\\" print(url) resp = req.get(url) if 200 == resp.status_code: temp = resp.content with open(fullname, 'wb') as fw: fw.write(resp.content) size = get_video_resolution(fullname) if size[0] &lt; 1000: os.remove(fullname) break else: break"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2024-07-02T13:50:31.000Z"}],["meta",{"property":"article:author","content":"Haiyue"}],["meta",{"property":"article:published_time","content":"2023-12-15T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-07-02T13:50:31.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Download TS\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2023-12-15T00:00:00.000Z\\",\\"dateModified\\":\\"2024-07-02T13:50:31.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Haiyue\\"}]}"]]},"headers":[{"level":2,"title":"download ts","slug":"download-ts","link":"#download-ts","children":[]}],"git":{"createdTime":1719928231000,"updatedTime":1719928231000,"contributors":[{"name":"Haiyue","email":"nutterair1989@gmail.com","commits":1}]},"readingTime":{"minutes":0.59,"words":176},"filePathRelative":"techniques/Tools/others/ts.md","localizedDate":"December 15, 2023","excerpt":"<h2> download ts</h2>\\n<div class=\\"language-python line-numbers-mode\\" data-ext=\\"py\\"><pre class=\\"language-python\\"><code><span class=\\"token keyword\\">import</span> requests <span class=\\"token keyword\\">as</span> req\\n<span class=\\"token keyword\\">import</span> pandas <span class=\\"token keyword\\">as</span> pd\\n<span class=\\"token keyword\\">import</span> cv2\\n\\n<span class=\\"token keyword\\">def</span> <span class=\\"token function\\">get_video_resolution</span><span class=\\"token punctuation\\">(</span>ts_file_path<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">:</span>\\n    <span class=\\"token keyword\\">try</span><span class=\\"token punctuation\\">:</span>\\n        <span class=\\"token comment\\"># Open the TS file</span>\\n        cap <span class=\\"token operator\\">=</span> cv2<span class=\\"token punctuation\\">.</span>VideoCapture<span class=\\"token punctuation\\">(</span>ts_file_path<span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token comment\\"># Get the resolution</span>\\n        width <span class=\\"token operator\\">=</span> <span class=\\"token builtin\\">int</span><span class=\\"token punctuation\\">(</span>cap<span class=\\"token punctuation\\">.</span>get<span class=\\"token punctuation\\">(</span>cv2<span class=\\"token punctuation\\">.</span>CAP_PROP_FRAME_WIDTH<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span>\\n        height <span class=\\"token operator\\">=</span> <span class=\\"token builtin\\">int</span><span class=\\"token punctuation\\">(</span>cap<span class=\\"token punctuation\\">.</span>get<span class=\\"token punctuation\\">(</span>cv2<span class=\\"token punctuation\\">.</span>CAP_PROP_FRAME_HEIGHT<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token keyword\\">return</span> width<span class=\\"token punctuation\\">,</span> height\\n    <span class=\\"token keyword\\">except</span> Exception <span class=\\"token keyword\\">as</span> e<span class=\\"token punctuation\\">:</span>\\n        <span class=\\"token keyword\\">print</span><span class=\\"token punctuation\\">(</span><span class=\\"token string-interpolation\\"><span class=\\"token string\\">f\\"Error: </span><span class=\\"token interpolation\\"><span class=\\"token punctuation\\">{</span>e<span class=\\"token punctuation\\">}</span></span><span class=\\"token string\\">\\"</span></span><span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token keyword\\">return</span> <span class=\\"token boolean\\">None</span>\\n\\n\\n\\nuri <span class=\\"token operator\\">=</span> <span class=\\"token string\\">'https://embed-cloudfront.wistia.com/deliveries/731e2344da7f9e5dea577a06ba99a98fc3308213.m3u8/'</span>\\n\\ndf <span class=\\"token operator\\">=</span> pd<span class=\\"token punctuation\\">.</span>read_excel<span class=\\"token punctuation\\">(</span><span class=\\"token string\\">r'C:\\\\Users\\\\Administrator\\\\Mozaik\\\\videos.xlsx'</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0</span><span class=\\"token punctuation\\">)</span>\\ndf <span class=\\"token operator\\">=</span> df<span class=\\"token punctuation\\">[</span>df<span class=\\"token punctuation\\">[</span><span class=\\"token string\\">'id'</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">.</span>isnull<span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">==</span> <span class=\\"token boolean\\">False</span><span class=\\"token punctuation\\">]</span>\\nbase_path <span class=\\"token operator\\">=</span> <span class=\\"token string\\">r'C:\\\\Users\\\\Administrator\\\\Mozaik'</span>\\n\\nbase_url <span class=\\"token operator\\">=</span> <span class=\\"token string\\">'https://embed-cloudfront.wistia.com/deliveries/'</span>\\n\\n<span class=\\"token keyword\\">for</span> i <span class=\\"token keyword\\">in</span> df<span class=\\"token punctuation\\">.</span>index<span class=\\"token punctuation\\">:</span>\\n    item <span class=\\"token operator\\">=</span> df<span class=\\"token punctuation\\">.</span>loc<span class=\\"token punctuation\\">[</span>i<span class=\\"token punctuation\\">]</span>\\n    idx <span class=\\"token operator\\">=</span> <span class=\\"token number\\">1</span>\\n    temp <span class=\\"token operator\\">=</span> <span class=\\"token boolean\\">None</span>\\n    <span class=\\"token keyword\\">while</span> <span class=\\"token boolean\\">True</span><span class=\\"token punctuation\\">:</span>\\n        fname <span class=\\"token operator\\">=</span> <span class=\\"token string-interpolation\\"><span class=\\"token string\\">f\\"seg-</span><span class=\\"token interpolation\\"><span class=\\"token punctuation\\">{</span>idx<span class=\\"token punctuation\\">}</span></span><span class=\\"token string\\">-v1-a1.ts\\"</span></span>\\n        idx <span class=\\"token operator\\">+=</span> <span class=\\"token number\\">1</span>\\n        folder <span class=\\"token operator\\">=</span> <span class=\\"token string-interpolation\\"><span class=\\"token string\\">f'</span><span class=\\"token interpolation\\"><span class=\\"token punctuation\\">{</span>item<span class=\\"token punctuation\\">[</span><span class=\\"token string\\">\\"Title\\"</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">}</span></span><span class=\\"token string\\">-</span><span class=\\"token interpolation\\"><span class=\\"token punctuation\\">{</span>item<span class=\\"token punctuation\\">[</span><span class=\\"token string\\">\\"subtitle\\"</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">}</span></span><span class=\\"token string\\">'</span></span>\\n        <span class=\\"token keyword\\">print</span><span class=\\"token punctuation\\">(</span>folder<span class=\\"token punctuation\\">)</span>\\n        store_path <span class=\\"token operator\\">=</span> os<span class=\\"token punctuation\\">.</span>path<span class=\\"token punctuation\\">.</span>join<span class=\\"token punctuation\\">(</span>base_path<span class=\\"token punctuation\\">,</span> folder<span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token keyword\\">if</span> <span class=\\"token keyword\\">not</span> os<span class=\\"token punctuation\\">.</span>path<span class=\\"token punctuation\\">.</span>exists<span class=\\"token punctuation\\">(</span>store_path<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">:</span>\\n            os<span class=\\"token punctuation\\">.</span>makedirs<span class=\\"token punctuation\\">(</span>store_path<span class=\\"token punctuation\\">)</span>\\n        fullname <span class=\\"token operator\\">=</span> os<span class=\\"token punctuation\\">.</span>path<span class=\\"token punctuation\\">.</span>join<span class=\\"token punctuation\\">(</span>store_path<span class=\\"token punctuation\\">,</span> fname<span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token keyword\\">if</span> os<span class=\\"token punctuation\\">.</span>path<span class=\\"token punctuation\\">.</span>exists<span class=\\"token punctuation\\">(</span>fullname<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">:</span>\\n            <span class=\\"token keyword\\">continue</span>\\n        url <span class=\\"token operator\\">=</span> <span class=\\"token string-interpolation\\"><span class=\\"token string\\">f\\"</span><span class=\\"token interpolation\\"><span class=\\"token punctuation\\">{</span>base_url<span class=\\"token punctuation\\">}</span></span><span class=\\"token interpolation\\"><span class=\\"token punctuation\\">{</span>item<span class=\\"token punctuation\\">[</span><span class=\\"token string\\">'id'</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">}</span></span><span class=\\"token string\\">/</span><span class=\\"token interpolation\\"><span class=\\"token punctuation\\">{</span>fname<span class=\\"token punctuation\\">}</span></span><span class=\\"token string\\">\\"</span></span>\\n        <span class=\\"token keyword\\">print</span><span class=\\"token punctuation\\">(</span>url<span class=\\"token punctuation\\">)</span>\\n        resp <span class=\\"token operator\\">=</span> req<span class=\\"token punctuation\\">.</span>get<span class=\\"token punctuation\\">(</span>url<span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token keyword\\">if</span> <span class=\\"token number\\">200</span> <span class=\\"token operator\\">==</span> resp<span class=\\"token punctuation\\">.</span>status_code<span class=\\"token punctuation\\">:</span>\\n            temp <span class=\\"token operator\\">=</span> resp<span class=\\"token punctuation\\">.</span>content\\n            <span class=\\"token keyword\\">with</span> <span class=\\"token builtin\\">open</span><span class=\\"token punctuation\\">(</span>fullname<span class=\\"token punctuation\\">,</span> <span class=\\"token string\\">'wb'</span><span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">as</span> fw<span class=\\"token punctuation\\">:</span>\\n                fw<span class=\\"token punctuation\\">.</span>write<span class=\\"token punctuation\\">(</span>resp<span class=\\"token punctuation\\">.</span>content<span class=\\"token punctuation\\">)</span>\\n            size <span class=\\"token operator\\">=</span> get_video_resolution<span class=\\"token punctuation\\">(</span>fullname<span class=\\"token punctuation\\">)</span>\\n            <span class=\\"token keyword\\">if</span> size<span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0</span><span class=\\"token punctuation\\">]</span> <span class=\\"token operator\\">&lt;</span> <span class=\\"token number\\">1000</span><span class=\\"token punctuation\\">:</span>\\n                os<span class=\\"token punctuation\\">.</span>remove<span class=\\"token punctuation\\">(</span>fullname<span class=\\"token punctuation\\">)</span>\\n                <span class=\\"token keyword\\">break</span>\\n        <span class=\\"token keyword\\">else</span><span class=\\"token punctuation\\">:</span>\\n            <span class=\\"token keyword\\">break</span>\\n</code></pre><div class=\\"line-numbers\\" aria-hidden=\\"true\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","autoDesc":true}`);export{n as data};
