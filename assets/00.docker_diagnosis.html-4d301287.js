import{_ as e}from"./plugin-vue_export-helper-c27b6911.js";import{o as a,c as s,f as n}from"./app-e17a1835.js";const i={},t=n(`<h2 id="reduce-docker-file-size" tabindex="-1"><a class="header-anchor" href="#reduce-docker-file-size" aria-hidden="true">#</a> Reduce Docker File Size</h2><p>Docker Desktop for Windows v2, which uses WSL2, stores all image and container files in a separate virtual volume (vhdx). This virtual hard disk file can automatically grow when it needs more space (to a certain limit). Unfortunately, if you reclaim some space, i.e. by removing unused images, <span style="color:orange;">vhdx doesn&#39;t shrink automatically</span>.<br> Please reclaim some space on windows following the steps below:</p><h3 id="step-1-release-the-file-from-the-ocupied-process" tabindex="-1"><a class="header-anchor" href="#step-1-release-the-file-from-the-ocupied-process" aria-hidden="true">#</a> Step 1: Release the file from the ocupied process</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>net stop com.docker.service
taskkill /IM <span class="token string">&quot;docker.exe&quot;</span> /F
taskkill /IM <span class="token string">&quot;Docker Desktop.exe&quot;</span> /F
wsl <span class="token parameter variable">--shutdown</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="step-2-reclaim-the-space" tabindex="-1"><a class="header-anchor" href="#step-2-reclaim-the-space" aria-hidden="true">#</a> Step 2: Reclaim the space</h3><p>(Please using PowerShell)</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>Optimize-VHD <span class="token parameter variable">-Path</span> <span class="token variable">$Env</span>:LOCALAPPDATA<span class="token punctuation">\\</span>Docker<span class="token punctuation">\\</span>wsl<span class="token punctuation">\\</span>data<span class="token punctuation">\\</span>ext4.vhdx <span class="token parameter variable">-Mode</span> Full
Optimize-VHD <span class="token parameter variable">-Path</span> <span class="token variable">$Env</span>:LOCALAPPDATA<span class="token punctuation">\\</span>Docker<span class="token punctuation">\\</span>wsl<span class="token punctuation">\\</span>disk<span class="token punctuation">\\</span>docker_data.vhdx <span class="token parameter variable">-Mode</span> Full
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div>`,7),o=[t];function r(l,c){return a(),s("div",null,o)}const u=e(i,[["render",r],["__file","00.docker_diagnosis.html.vue"]]);export{u as default};
